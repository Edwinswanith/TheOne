TC-005: Evidence Source Deduplication by URL
Purpose

Verify evidence sources are deduplicated by normalized URL and snippets merge.

Preconditions

Evidence collector runs

Test Data

Two sources with effectively same URL:

https://example.com/pricing

https://example.com/pricing/

Steps

Trigger evidence run

Ensure the evidence tool returns both URLs

Inspect evidence.sources

Expected Results

Only one EvidenceSource entry exists for the normalized URL

Snippets from both are merged

quality_score equals the maximum of the two

All evidence references in nodes point to the deduped source ID